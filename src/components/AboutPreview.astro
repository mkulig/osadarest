---
import { Picture } from "astro:assets";
import { getCollection } from "astro:content";
import { SITE_TITLE } from "../consts";
import { toCardProps } from "../lib/apartments";

interface USP {
	icon: string;
	text: string;
}

interface Props {
	usps: USP[];
}

const { usps } = Astro.props;

const all = await getCollection("apartments");
const featured = all
	.filter((e) => e.data.featured)
	.sort((a, b) => a.data.order - b.data.order);

const items = featured.map(toCardProps);
---

<section
  id="about"
  class="py-8 sm:py-10 lg:py-14"
  aria-labelledby="about-heading"
  itemscope
  itemtype="https://schema.org/LodgingBusiness"
>
  <span class="sr-only" itemprop="name">{SITE_TITLE}</span>

  <div class="sr-only" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
     <span itemprop="streetAddress">Osada 3</span>
     <span itemprop="addressLocality">Tylicz</span>,
     <span itemprop="postalCode">33-383</span>,
     <span itemprop="addressCountry">PL</span>
   </div>

  <div class="mx-auto grid container grid-cols-1 items-center gap-6 px-4 sm:gap-8 sm:px-6 lg:grid-cols-2 lg:gap-12 lg:px-8">
      <div class="flex items-center gap-2 h-[400px] w-full mt-10 mx-auto">
          {items.map((item) => (
              <div class="relative group grow transition-all w-56 rounded-lg overflow-hidden h-[400px] duration-500 hover:w-full fade-up">
                  <Picture class="h-full w-full object-cover object-center"
                      src={item.cover}
                      alt={item.coverAlt}
                      quality={50}
                      formats={["avif","webp"]}
                      fallbackFormat="webp"
                      height={400}
                      width={300}
                      />
              </div>
          ))}

      </div>

    <div class="mx-auto w-full max-w-xl">
      <h2 id="about-heading" class="text-2xl font-semibold tracking-tight sm:text-3xl text-gray-900 dark:text-gray-100 fade-up">
          Wypocznij w naszych apartamentach
      </h2>

      <p class="mt-3 text-gray-600 dark:text-gray-400 fade-up" itemprop="description">
          Komfortowe i w pełni wyposażone apartamenty położone w sercu natury.
               To <strong>idealny nocleg w górach</strong> dla rodzin, par i grup przyjaciół,
               którzy szukają spokoju, wygody i bliskości atrakcji Tylicza.
      </p>

      {usps?.length > 0 && (
        <ul class="mt-5 grid list-none grid-cols-1 gap-3 p-0 sm:grid-cols-2 text-gray-600 dark:text-gray-400">
          {usps.map((u) => (
            <li class="flex items-start gap-2 fade-up">
              {u.icon && <span class="text-lg leading-none" aria-hidden="true">{u.icon}</span>}
              <span class="text-sm">{u.text}</span>
            </li>
          ))}
        </ul>
      )}

    </div>
  </div>
</section>
