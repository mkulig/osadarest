---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import MainHeader from "../../components/MainHeader.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";
import Layout from "../../layouts/Layout.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="Blog" description={SITE_DESCRIPTION}>
    <MainHeader>
        <span slot="title">Blog</span>
        <span slot="description">Dzielimy się aktualnościami, wskazówkami dla turystów itd.
        Warto tu wracać, aby być na bieżąco i lepiej zaplanować swój pobyt w górach. </span>
    </MainHeader>

	<section class="grid md:grid-cols-3 gap-10">
			{
				posts.map((post) => (
					<div class="hover:brightness-105">
						<a href={`/blog/${post.id}`}>
						{post.data.heroImage && (
							<Image width={720} height={360} src={post.data.heroImage} alt=""  class="w-full rounded-xl dark:shadow-white/20 shadow-lg "/>
						)}

							<p class="text-gray-400 dark:text-gray-600 text-end py-2">
								Opublikowano <FormattedDate date={post.data.pubDate} />
							</p>
							<h2 class="text-2xl text-gray-900 dark:text-gray-100">{post.data.title}</h2>
							<h4 class="text-gray-600 dark:text-gray-400">{post.data.description}</h4>
						</a>
					</div>
				))
			}
	</section>
</Layout>
